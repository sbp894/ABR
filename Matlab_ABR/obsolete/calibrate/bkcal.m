function bkcal%	Program for creating a microphone calibration file%	Input: S0 is taken from calibration data that%	provided with the microphone.MicName = 'mic168.m';;MicNum  = 2308168;%These inputs are taken from B&K microphone data filePistonOut = 31.7; % 124 dB SPL in units of Pa re 20microPaS0 = -37.3; % in units of dB re 1V/Paexpect = 13.6;            % in mV/PadBV = 20*log10(PistonOut * expect /1000); %pistonphone should produce this output in units of Vfreq_hz =...[1.0001.0591.1221.1891.2591.3341.4131.4961.5851.6791.7781.8841.9952.1132.2392.3712.5122.6612.8182.9853.1623.3503.5483.7583.9814.2174.4674.7325.0125.3095.6235.9576.3106.6837.0797.4997.9438.4148.9139.44110.00010.59311.22011.88512.58913.33514.12514.96215.84916.78817.78318.83719.95321.13522.38723.71425.11926.60728.18429.85431.62333.49735.48137.58439.81142.17044.66847.31550.11953.08856.23459.56663.09666.83470.79574.98979.43384.14089.12594.406100.000105.925112.202118.850125.893133.352141.254149.624158.489167.880177.828188.365199.526211.349223.872237.137251.189266.073281.838298.538316.228334.965354.813375.837398.107421.697446.684473.151501.187530.884562.341595.662630.957668.344707.946749.894794.328841.395891.251944.0611000.0001059.2501122.0201188.5001258.9301333.5201412.5401496.2401584.8901678.8001778.2801883.6501995.2602113.4902238.7202371.3702511.8902660.7302818.3802985.3803162.2803349.6503548.1303758.3703981.0704216.9704466.8404731.5105011.8705308.8405623.4105956.6206309.5706683.4407079.4607498.9407943.2808413.9508912.5109440.61010000.00010592.50011220.20011885.00012589.30013335.20014125.40014962.40015848.90016788.00017782.80018836.50019952.60021134.90022387.20023713.70025118.90026607.30028183.80029853.80031622.80033496.50035481.30037583.70039810.700];amp_db =...[-4.636-4.392-4.137-3.870-3.595-3.325-3.068-2.833-2.612-2.402-2.200-2.009-1.832-1.671-1.524-1.391-1.265-1.151-1.049-0.956-0.866-0.781-0.702-0.631-0.566-0.511-0.467-0.431-0.398-0.361-0.328-0.296-0.271-0.246-0.220-0.195-0.174-0.160-0.146-0.131-0.116-0.103-0.096-0.083-0.070-0.056-0.055-0.052-0.045-0.033-0.025-0.024-0.022-0.021-0.016-0.014-0.010-0.007-0.004-0.0010.0020.0050.0070.0080.0100.0130.0160.0180.0190.0170.0160.0160.0160.0160.0160.0160.0150.0140.0130.0110.0100.0070.0070.0070.0060.0060.0060.0060.0050.0040.0030.0010.0040.0050.0030.000-0.005-0.007-0.010-0.008-0.008-0.007-0.010-0.012-0.015-0.018-0.019-0.016-0.016-0.012-0.011-0.012-0.010-0.007-0.004-0.004-0.004-0.0020.0010.0020.0030.0040.0070.0080.0100.0100.0090.0090.0090.0140.0130.0120.0080.0060.0030.0010.0030.000-0.004-0.004-0.005-0.005-0.002-0.0010.0000.0050.0080.0070.0140.0000.0020.0230.0180.0390.0460.0660.1210.1410.1560.1440.1790.2380.2770.3540.4760.4760.4250.4020.3600.4690.4650.4130.3830.3510.2700.2400.1880.0900.2100.2130.3420.2150.076-0.129-0.123];bkdata = [freq_hz,amp_db];length_of_data = length(bkdata);% Creating microphone file for SRCALfile_name = fullfile(strtok(matlabroot,filesep),'matlab_user','srcal_232','functions',MicName);fid = fopen(file_name,'wt');fprintf(fid,'%s %s\n\n','function mic =',strrep(MicName,'.m',''));fprintf(fid,'%s\n\n','%Microphone Calibration File');fprintf(fid,'%s%d%s\n','mic = struct(''number'',',MicNum,',...');fprintf(fid,'\t%s%4.1f%s\n',    '''preamp'',',-0.2,',...');fprintf(fid,'\t%s%6.2f%s\n','''S0'',',S0,',...');fprintf(fid,'\t%s%5.2f%s\n','''expect'',',expect,',...');fprintf(fid,'\t%s%5.2f%s\n','''dBV'',',dBV,',...');fprintf(fid,'\t%s%8.5f %6.2f%s\n','''CalData'',{[[',bkdata(1,1)/1000,124-bkdata(1,2),'];');for index = 2:length_of_data-1    fprintf(fid,'\t\t\t\t%c%8.5f %6.2f%s\n','[',bkdata(index,1)/1000,124-bkdata(index,2),'];');endfprintf(fid,'\t\t\t\t%c%8.5f %6.2f%s\n','[',bkdata(length_of_data,1)/1000,124-bkdata(length_of_data,2),']]});');fclose(fid);	%close the file and return to parameter change function