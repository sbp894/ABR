function [error] = read_cal_file%Program to read previous calibration files within CALIBRATIONglobal FIG NelData data_dircur_dir = cd(fullfile(data_dir,NelData.General.CurDataDir));filterspec = '*.m';[data_file cur_dir] = uigetfile(filterspec,'Calibration Files');if data_file    cd(cur_dir);    command_line = sprintf('%s%s%c','[x]=',strrep(data_file,'.m',''),';');    eval(command_line);    filename = sprintf('%s%3d%c','ARCHIVE(',x.General.picture_number,')');    set(FIG.ax2.ProgData,'Color',[.8 .8 .8],'String',{x.General.program_name x.General.date filename});    if findstr(upper(x.General.program_name),'CAL'),        set(FIG.ax2.ProgMess,'String','Inspecting data file...');        set(FIG.ax3.ParamData1,'Color',[.8 .8 .8],'String',{x.Hardware.mic});        set(FIG.ax3.ParamData2,'Color',[.8 .8 .8],'String',{x.Stimuli.frqlo; x.Stimuli.frqhi; ''; x.Stimuli.syslv});        set(FIG.ax1.axes,'XLim',[x.Stimuli.frqlo x.Stimuli.frqhi]);        set(FIG.ax1.axes,'XTick',[x.Stimuli.frqlo x.Stimuli.frqhi]);        low_lim = floor(min(x.CalibData(:,2))/20)*20;        up_lim  = ceil( max(x.CalibData(:,2))/20)*20;        set(FIG.ax1.axes,'YLim',[low_lim up_lim]);        set(FIG.ax1.line1,'XData',x.CalibData(:,1),'YData',x.CalibData(:,2));        drawnow;    else        set(FIG.ax1.line1,'XData',0,'YData',0);        set(FIG.ax2.ProgMess,'String','Not a calibration file!');    endelse    warndlg('No file was selected!','Analysis Manager',1);end